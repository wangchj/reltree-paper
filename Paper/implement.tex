
In this section, we discuss the issue of implementing the protocol proposed
in the previous section. One issue is that the Internet currently does not
support a protocol without sender information. We propose two ways of
implementing our One-Way protocol: using trusted gateways, and on top of
UDP transport layer protocol~\cite{RFC768}.

\subsection{Trust Gateway}

In the trust gateway method, we propose to implement our protocol
in hardware with a wireless access point that understands our
One-Way protocol. In the method, the network topology is divided
into two parts: a private network that understands the One-Way
protocol and the rest of the world that only understand the IP
protocol as shown in Figure~\ref{fig:gateway}. The gateway acts as
a normal wireless access point and multiplexes traffic for the
clients inside the private network.

\begin{figure}[h]
\begin{center}
\includegraphics[width=3.4in]{one-way-gateway.eps}
\caption{Trusted Gateway.} \label{fig:gateway}
\end{center}
\end{figure}


Since the control messages do not have the issue of concealing the
sender routing address, the validation route is constructed on the
normal IP network. When a client intends to send a file to a data
collection server, she finds a peer on the traditional IP network
that runs our protocol. Afterwards, the client constructs a
connection request message and sends the message to the peer. The
first peer forwards the request to a second peer and so on until
the hop count of the request and the request is sent to the
server.

When sending payload, the sender sends payload packets through the
trusted gateway. Upon receiving a payload packet $p$, the gateway
performs a tunneling operation and transforms $p$  into a TCP
packet including all necessary information for the protocol in the
packet, using its own identity in the packet header, then forwards
the packet into the IP network. Since the gateway utilizes its own
IP address as the address of the packets, it shields the identity
of the mobile clients. One reason for this tunneling-based
approach is that some Internet service providers (ISP) block
packets without valid source host addresses.
Figure~\ref{fig:gateway} also depicts the networking stack
configuration of this approach.

Opponents of this approach may think that attackers can still
trace the mobile clients to a specific subnet where the gateway
device resides. We argue that since most of the clients are highly
mobile and with a number of access points in one geographic
region, the identity of the mobile devices can be protected with
high confidence.

\subsection{Over User Datagram Protocol}

If a subnet allows packets with anonymous sender IP addresses
(such as the broadcast address) to be forwarded through the
network, then we can build our protocol on top of existing network
protocols. In this approach, we completely do away with trusted
access points by building the One-Way protocol as an application
layer protocol on top of the User Datagram Protocol (UDP) and
employ existing network hardware and infrastructure. This method
is illustrated in Figure~\ref{fig:imp-udp}.

\begin{figure}[h]
\begin{center}
\includegraphics[width=3.4in]{one-way-udp.eps}
\caption{One-Way over UDP.} \label{fig:imp-udp}
\end{center}
\end{figure}

The steps for making a connection request is the same for the
trusted gateway approach, but payload transmission is slightly
different. During payload transmission, instead of letting a
gateway to replace the identity of the packets, the sender uses
the broadcast IP address (255.255.255.255) in the sender address
field of the packet. This denotes that the sender is anonymous and
the server should treat the data transmission using anonymous
protocol.

Note that the reason we use UDP is that TCP will not work in our
approach because it is a connection oriented protocol. With an
arbitrary IP address field, TCP will be unable to establish a
connection with the handshaking protocol.

%In our experiment, we are able to send IP packets with arbitrary source address into
%the network and receive it on the server.
